<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, posted on Brightspace.  

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<!--<base href="https://engineering.purdue.edu/ece477/StudentWebTemplate/" />-->
<base href="https://engineering.purdue.edu/477grp18/" /> <!-- Replace the N with your team number-->

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
            <h2>Progress Report for Graeme Usman</h2>

			<h4>Week 4:</h4>
            <b>Date:</b> 3 February 2023 <br>
            <b>Total hours:</b> 7 <br>
            <b>Description of project design efforts:</b><br>
			This week's efforts was effectively a continuation from last week, which consisted of me solely working on our FFT function which was behaving strangely. I figured out the seemingly
			random behavior of the peak frequency output was actually consistently incorrect, which just means it is correct, but with an asterisk.
			<div id="correct* frequencies"> 
				<img src="Team/progress/progress2pics/weird_freqs.png" width="500" height="500"></img>
			</div>
			By sending a sine wave from the AD2 with a known frequency, I saw that the values returned were off by a factor of about 3.26. This was fine if it stay consistently incorrect, because 
			we know that is doing what it is supposed to, however, it does effectively reduce our usable frequency range down by about a third. This is unfortunate, but workable. I spent a good
			amount of time trying to figure out where this seemingly arbitrary 3.26 value came from, but to no avail.
			<div id="pepe silvia"> 
				<img src="Team/progress/progress2pics/pepe_silvia.jpg" width="500" height="500"></img>
			</div> 
			With a small change to my code, I was able to put together a rudimentary frequency beat detector. This is the basis for putting together the FFT proccess with the reactive LED process,
			but that is for another day.
			<div id="3.263.263.263.263.263.263.263.26"> 
				<img src="Team/progress/progress2pics/code_3.26.png" width="500" height="500"></img>
			</div> 
			<div id="beat_detector.mp4"> 
				<img src="Team/progress/progress2pics/beat_detect.png" width="500" height="500"></img>
			</div> 
			Frustrated with this 3.26 fiasco, I decided to try and implement a different FFT library, citing the original arduinoFFT library as its motivation. This new library was built on 
			another library originally coded for the ESP-IDF and modified for arduino, so my thought process was "learn this one and transition easily into the ESP-IDF". I am currently in the midst
			of writing more code around this new library. Even if this comes with similar issues as the previous library, I hope that coding around similarly functioning libraries allows me to 
			understand what is going on under the hood more. I have already spent a decent amount of time trying to learn arduinoFFT, so hopefully that gives me a head-start when trying to learn this 
			new one as well.
            <br>

            <h4>Week 3:</h4>
            <b>Date:</b> 27 January 2023 <br>
            <b>Total hours:</b> 7 <br>
            <b>Description of project design efforts:</b><br>
			This week's time was spent dedicated to learning about and implementing Fast Fourier Transforms to our design, since our implementation of the electret microphone from last week
			was fairly successful, as well as the addition of our 3.5 mm TRRS jack to our design by Avik. My first attempt at utilizing an FFT <a href="https://github.com/kosme/arduinoFFT">library</a><br>
			was admittedly a bit ambitious; I tried to get an analog input from music playing through the 3.5 mm AUX and trying to perform FFT's on that signal. This obviously did not go smoothly,
			but the issues that I ran into forced me to take a step back and try to figure out each moving part in a more methodical manner, building up from what I know (or thought I knew). 
			<div id="what is the dog ACTUALLY doing"> 
				<img src="Team/progress/progress2pics/freq_association.jpg" width="500" height="500"></img>
			</div>
			My first challenge was trying to interpret what the FFT was actually doing under the hood, so with some example code that had a working implementation of the library, 
			and the .cpp file of the library itself, I tried to associate different frequency with the indices of the array that my audio was being sampled into. However, the values were still
			too erratic and were not easily understandable. My second attempt was to send a known signal into the ADC pin, since we had already proven this worked last week. Using the AD2,
			I sent in a 1kHz singal into the ADC, and attempted to make sense of the values that was being outputted. Me and Avik spent a good portion of the day trying to understand why the FFT was
			returning a peak value at a frequency that was nowhere close to the frequency of the AD2's wave. 
			<div id="wave_gen"> 
				<img src="Team/progress/progress2pics/AD2_wavegen.jpg" width="500" height="500"></img>
			</div>
			<div id="wave_to_ADC"> 
				<img src="Team/progress/progress2pics/AD2_wavegen.jpg" width="500" height="500"></img>
			</div>
			My current attempt is sending in a wave that is offset by 1.15V, to avoid the ESP32's ADC pins' limitation of being able to read voltage values of 150mV-2450mV, as well as 
		    getting negative values all together. I feel like I am on the right track, but the only real way to confirm my understanding is to just keep on trying.

            <h4>Weeks 1-2:</h4>
            <b>Date:</b> 20 January 2023 -<br>
            <b>Total hours:</b> 16 <br>
            <b>Description of project design efforts:</b><br>
			The past two weeks were mainly used to gather our thoughts and put them in a comprehesible manner. I spent much of the first week researching the plausibility of our
			project and what approach we should take to make it work as smoothly as possible. 
			Much of my contribution for the first week was organizational and research, organizing our Discord server that serves as the main point of communication to be more 
			easily accessible and navigable. For research, I spent time (re-)learning about Fourier Transforms, which will be our main process that allows us to synchronize lights to music,
			as well as looking into the different parts of our design and how we should approach integrating them step by step. 
			As a team we began to paint a clearer picture of our project and aligned on a lot of design ideas, as well as splitting up our goals each day.  
			During the second week, we took a much more hands-on approach: we were able to setup the environment to write code to our microcontroller. We set up some very basic code to read 
			an analog input to the circuit, which we then sent an wave generator output from an AD2 into the microcontroller. We built an amplifier circuit that would allow us to get 
			visible values from an electret microphone, which we also were able to wire into the ADC pin of our microcontroller and read values the same way we read the AD2 wave gen. 
			<div id="microphone circuit"> 
				<img src="Team/progress/progress2pics/mic_circuit.jpg" width="500" height="500"></img>
			</div>
		</br>
        </div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>
</body>
</html>
