<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, posted on Brightspace.  

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<!--<base href="https://engineering.purdue.edu/ece477/StudentWebTemplate/" />-->
<base href="https://engineering.purdue.edu/477grp18/" /> <!-- Replace the N with your team number-->

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
			<h2>Progress Report for Graeme Usman</h2>
			<h4>Week 11:</h4>
            <b>Date:</b> 31 March 2023 <br>
            <b>Total hours:</b> 8 <br>
            <b>Description of project design efforts:</b><br>
			This week was spent soldering the PCB again, however, much of this week was reliant on our parts being delivered which did not fully come in until late Thursday afternoon. So 
			for Tuesday and Wendesday, I instead took another PCB that we had made and soldered just an MCU to it, as we have 2 ESP-32s. My plan was to get some more practice on soldering the
			MCU to the PCB, and also have this board for testing the MCU while we wait for our power circuit's parts to come in. I soldered the MCU, two push buttons for debugging, and some wires
			coming out of the TX and RX pins for loading code, at Anurag's request, as well as all the related capacitors and resistors. We wanted to follow the recommended process for verifying our
			PCB, which asks to test our power circuit for a full day before even touching the MCU, but we are just limited by the U.S. Postal Service if we do so. So we thought that making two boards
			would be a good idea, since we can test the MCU separately before the power circuit is fully complete. 
			<div id=""> 
				<img src="Team/progress/progress2pics/PCB_CPU.jpg" width="500" height="500"></img>
				<img src="Team/progress/progress2pics/PCB_CPU_closeup.jpg" width="500" height="500"></img>
				<img src="Team/progress/progress2pics/PCB_CPU_buttons.jpg" width="500" height="500"></img>
			</div>

			The parts that we needed to complete our power circuit finally came in late Thursday afternoon, so I was able to quickly finish up that circuit as well. I attached the last tiny
			capacitor and inductor that we needed, as well as the power connector. From there, me and Anurag set it up to run overnight on 5V power, as per the recommended verification process.
			<div id=""> 
				<img src="Team/progress/progress2pics/PCB_power_circuit_complete.jpg" width="500" height="500"></img>
			</div>

			I also completed the required Bechtel saftey quizzes needed to use the facility, but we are still working to get the needed hardware from Home Depot, but that is something
			for us to tackle once the PCB is completely confirmed to be functional.
	

		<div id="content">
			<h2>Progress Report for Graeme Usman</h2>
			<h4>Week 10:</h4>
            <b>Date:</b> 24 March 2023 <br>
            <b>Total hours:</b> 8 <br>
            <b>Description of project design efforts:</b><br>
			This Tuesday after manlab, Anurag and I began the process of getting access to the Bechtel Design Center's resources and workspaces. We talked to a few of the 
			consultants there about the specifics of our project. We need the ability to cut a large piece of acrylic down into smaller pieces that we will use to diffuse 
			our LEDs to make it look more uniform and presentable, but we didn't really know where to start when it comes to actually cutting acrylic due to the physical properties 
			of acrylic. This was the main question that we asked a few people about, who then directed us to the Printing & Prototyping department who have access to a laser cutter,
			which was believed to be the best tool to use for cutting acrylic of our specific dimensions. We also were recommended to also talk to the Woodworking department, as the 
			other half of our design requires some precise cutting of wood in order to incorporate the acrylic pieces together with the wood frame. We began the process of gaining 
			access to the tools that Bechtel has by submitting a project proposal, as well as the safety quizzes we need to pass to be able to use them.
			
			My Thursday and Friday were spent beginning the process of soldering together the PCB, which finally came in on Wednesday due to some confusion during delivery. However, 
			some of the board components that we purchased have not come in yet and we also accidentally ordered the wrong inductor, so to minimize any future confusion, me and Anurag
			cataloged what we have already ordered, what is correct, what is incorrect, and what we need to order. After that, we ordered another set of parts that should be in early next,
			so by then I hope to be done soldering the rest of the board. 

			Given that I couldn't fully solder the board this week, I instead tried to get some practice on one of the five PCBs that we have by soldering with the components that we do
			have, which is pretty much all of the power circuit. To my surprise, the smallest components that our design needs is actually in the power circuit, and I learned the hard way
			how difficult it is to solder tiny capacitors by hand. It is definitely doable by me, as the alternative to it would have to be ordering a whole new PCB, which we do not want to 
			have to do again.
		
			<div id=""> 
				<img src="Team/progress/progress2pics/PCB_full.jpg" width="500" height="500"></img>
				<img src="Team/progress/progress2pics/PCB_power_circuit.jpg" width="500" height="500"></img>
			</div>

		<div id="content">
			<h2>Progress Report for Graeme Usman</h2>
			<h4>Week 8-9:</h4>
            <b>Date:</b> 10 March 2023 <br>
            <b>Total hours:</b> 25 <br>
            <b>Description of project design efforts:</b><br>
			Our presentation during Week 8 was on Thursday, so much of my effort for this class was spent working on the presentation up until Thursday. I worked on the slides for project overview, 
			component choice, designed the block diagram and refined it with Anurag, prototyping, and schematic. 
			
			After the presentation, we took the feedback of our design and began fixing, adding, or completely redesigning almost every part of our cricuit. Over Friday and Saturday, I was able to 
			solder the correct TMUX that we will be using for our design. From there, I was able to confirm that I did not burn it out during the soldering process, and prove its functionality 
			by sending in an analog signal from the AD2, a song through our AUX jack, and the third input was just grounded (but this is where the Bluetooth-DAC output will be going through). 
			By sending a high voltage through the select lines in different combinations, I was able to see that the inputs were changing depending on what select lines where high or low. 
			<div id=""> 
				<img src="Team/progress/progress2pics/TMUX_circuit.jpg" width="500" height="500"></img>
			</div>
			On Monday, the team decided that the multiple iterations of our op amp circuit was too cumbersome to keep changing layouts and resistor/capacitor values, so we decided to (try to) use 
			LTSpice to try and simulate what is best. On Tuesday, Anurag and I began prototyping a new microphone circuit, testing it with our MUX, and I kept updating our scehmatic. I wired together a
			debouced button circuit we could use for our input mode select, and added a JTAG Programming header to our schematic. 
			<div id="main_div"> 
				<div id="that's the power of the home depot">
					<img src="Team/progress/progress2pics/anu_work.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/button_debounced.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/aux_in_out.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/aux_into_mux.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/voltage_divider.jpg" width="200" height="200"></img>
				</div>
			</div>
			On Thursday, Anurag had finished building a microphone circuit, and when I came in we verified the circuit and the equations he used to find values. He and I then went and 
			revised some resistor and capacitor values by reading the oscilliscope so it would be readable by the ADC while also being safe for the pins to take in. With the microphone 
			finally decided on and tested, we added it to our schematic, as well as some more needed changes. 
			<div id="main_div"> 
				<div id="that's the power of the home depot">
					<img src="Team/progress/progress2pics/mic_final.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/mic_output.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/mic_output2.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/thursday_schem.jpg" width="200" height="200"></img>
				</div>
			</div>
			On Friday, I came in just as another voice in order to make some final checks and input on the final schematic and PCB design decisions. 

		<div id="content">
			<h2>Progress Report for Graeme Usman</h2>
			<h4>Week 7:</h4>
            <b>Date:</b> 24 February 2023 <br>
            <b>Total hours:</b> 3 <br>
            <b>Description of project design efforts:</b><br>
			I was not able to work as much as I planned to this week due to some assignments and exams for other classes. However, I was able to learn from Joe to solder very small ICs that we
			will eventually need to know how to do once our PCB has been manufactured. I was able to solder an analog MUX to a dev board using the solder station and a microscope, although the
			result was a bit messy, the experience using other resources OTHER than the soldering iron was very nice to have been able to work with. Once the MUX was fully soldered to the dev 
			board I set it up on a breadboard for testing, as we will need to plan out the circuitry for our input switching. The IC that I soldered is the not the same model that we are planning 
			to use, but it is both good practice for soldering, as well as for testing how we eventually want our circuit to behave. 
			I also forgot to take pictures this week, which is again my fault.

		<div id="content">
			<h2>Progress Report for Graeme Usman</h2>
			<h4>Week 6:</h4>
            <b>Date:</b> 17 February 2023 <br>
            <b>Total hours:</b> 2 <br>
            <b>Description of project design efforts:</b><br>
			Unfortunately, this week did not have much progress done on my behalf due to an illness (thankfully not COVID) I had contracted the Saturday prior, as well as attempting to study for  
			through said illness. It took about 5 days for symptoms to subside completely, and it was hard for me to find energy to spend on Senior Design this week. Thankfully, my teammates were 
			very understanding and were able to pick up my slack. On Friday, I felt well enough to work, so me an Anurag took a trip to Home Depot to gather a list of materials we wanted to use for 
			a prototype of our final design.
			<div id="main_div"> 
				<div id="that's the power of the home depot">
					<img src="Team/progress/progress2pics/acrylic_frosted.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/epoxy.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/lotsa_wood.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/polypolypoly.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/stain_preview.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/stain.jpg" width="200" height="200"></img>
					<img src="Team/progress/progress2pics/wood_gloo.jpg" width="200" height="200"></img>
				</div>
			</div>



            <h2>Progress Report for Graeme Usman</h2>
			<h4>Week 5:</h4>
            <b>Date:</b> 10 February 2023 <br>
            <b>Total hours:</b> 8 <br>
            <b>Description of project design efforts:</b><br>
			My job of implementing the FFT algorithm through the arduino framework seemed to have hit a wall after we found the upper limit of our microcontroller and code experimentally. Me, Avik, and 
			Anurag spent a good amount of time trying to figure out how fast our microcontroller takes to read an analog input through an ADC pin and save it to an array which would be sent to the 
			FFT process. This was because we had a hunch that we were losing samples during the time it takes from sampling through the pin, but the results of each of our different tests didn't seem 
			to give us any useful information. Ultimately the results were inconclusive and we didn't really know if what were getting was true, accurate, or useful. Instead of spending more time
			on this problem in arduino, which we all agreed could be a major issue, we decided to move on to learning how to code in the espressif framework. The documentation available is thorough, but
			difficult to parse and really make sense of, so we are making progress, slowly but surely.
			<div id="Oh boy, I can't wait to learn Espressif"> 
				<img src="Team/progress/progress2pics/esp_time.jpg" width="500" height="500"></img>
			</div>
			As the weeks start to pass, we began to realize our project required a lot more design detail to be ironed out. Today, me and Anurag spent some time putting the physical design of the entire
			project on to paper, metaphorically speaking; we actually put it all on our blackboard. We updated our PSSC's and Project Overview Description on the Team Website, as well as made plans
			to build a small scale version of our final design to see if we like the way it looks. 
			<div id="Big if true"> 
				<img src="Team/progress/progress2pics/LED_fixture_design.jpg" width="500" height="500"></img>
			</div>
			I unfortunately did not have the foresight to take many pictures this week, as I spent most of it wading through documentation and forum posts that were loosely related to the issues that 
			we were running into, but to no avail. I hope that next week we can at least get ADC sampling working in the ESP-IDF, if not the entire FFT algorithm, as I did come across some information
			of some built-in functionality provided in the ESP-IDF's libraries. 
			<br>


			<h4>Week 4:</h4>
            <b>Date:</b> 3 February 2023 <br>
            <b>Total hours:</b> 7 <br>
            <b>Description of project design efforts:</b><br>
			This week's efforts was effectively a continuation from last week, which consisted of me solely working on our FFT function which was behaving strangely. I figured out the seemingly
			random behavior of the peak frequency output was actually consistently incorrect, which just means it is correct, but with an asterisk.
			<div id="correct* frequencies"> 
				<img src="Team/progress/progress2pics/weird_freqs.png" width="500" height="500"></img>
			</div>
			By sending a sine wave from the AD2 with a known frequency, I saw that the values returned were off by a factor of about 3.26. This was fine if it stay consistently incorrect, because 
			we know that is doing what it is supposed to, however, it does effectively reduce our usable frequency range down by about a third. This is unfortunate, but workable. I spent a good
			amount of time trying to figure out where this seemingly arbitrary 3.26 value came from, but to no avail.
			<div id="pepe silvia"> 
				<img src="Team/progress/progress2pics/pepe_silvia.jpg" width="500" height="500"></img>
			</div> 
			With a small change to my code, I was able to put together a rudimentary frequency beat detector. This is the basis for putting together the FFT proccess with the reactive LED process,
			but that is for another day.
			<div id="3.263.263.263.263.263.263.263.26"> 
				<img src="Team/progress/progress2pics/code_3.26.png" width="500" height="500"></img>
			</div> 
			<div id="beat_detector.mp4"> 
				<img src="Team/progress/progress2pics/beat_detect.png" width="500" height="500"></img>
			</div> 
			Frustrated with this 3.26 fiasco, I decided to try and implement a different FFT library, citing the original arduinoFFT library as its motivation. This new library was built on 
			another library originally coded for the ESP-IDF and modified for arduino, so my thought process was "learn this one and transition easily into the ESP-IDF". I am currently in the midst
			of writing more code around this new library. Even if this comes with similar issues as the previous library, I hope that coding around similarly functioning libraries allows me to 
			understand what is going on under the hood more. I have already spent a decent amount of time trying to learn arduinoFFT, so hopefully that gives me a head-start when trying to learn this 
			new one as well.
            <br>

            <h4>Week 3:</h4>
            <b>Date:</b> 27 January 2023 <br>
            <b>Total hours:</b> 7 <br>
            <b>Description of project design efforts:</b><br>
			This week's time was spent dedicated to learning about and implementing Fast Fourier Transforms to our design, since our implementation of the electret microphone from last week
			was fairly successful, as well as the addition of our 3.5 mm TRRS jack to our design by Avik. My first attempt at utilizing an FFT <a href="https://github.com/kosme/arduinoFFT">library</a><br>
			was admittedly a bit ambitious; I tried to get an analog input from music playing through the 3.5 mm AUX and trying to perform FFT's on that signal. This obviously did not go smoothly,
			but the issues that I ran into forced me to take a step back and try to figure out each moving part in a more methodical manner, building up from what I know (or thought I knew). 
			<div id="what is the dog ACTUALLY doing"> 
				<img src="Team/progress/progress2pics/freq_association.jpg" width="500" height="500"></img>
			</div>
			My first challenge was trying to interpret what the FFT was actually doing under the hood, so with some example code that had a working implementation of the library, 
			and the .cpp file of the library itself, I tried to associate different frequency with the indices of the array that my audio was being sampled into. However, the values were still
			too erratic and were not easily understandable. My second attempt was to send a known signal into the ADC pin, since we had already proven this worked last week. Using the AD2,
			I sent in a 1kHz singal into the ADC, and attempted to make sense of the values that was being outputted. Me and Avik spent a good portion of the day trying to understand why the FFT was
			returning a peak value at a frequency that was nowhere close to the frequency of the AD2's wave. 
			<div id="wave_gen"> 
				<img src="Team/progress/progress2pics/AD2_wavegen.jpg" width="500" height="500"></img>
			</div>
			<div id="wave_to_ADC"> 
				<img src="Team/progress/progress2pics/AD2_wavegen.jpg" width="500" height="500"></img>
			</div>
			My current attempt is sending in a wave that is offset by 1.15V, to avoid the ESP32's ADC pins' limitation of being able to read voltage values of 150mV-2450mV, as well as 
		    getting negative values all together. I feel like I am on the right track, but the only real way to confirm my understanding is to just keep on trying.

            <h4>Weeks 1-2:</h4>
            <b>Date:</b> 20 January 2023 -<br>
            <b>Total hours:</b> 16 <br>
            <b>Description of project design efforts:</b><br>
			The past two weeks were mainly used to gather our thoughts and put them in a comprehesible manner. I spent much of the first week researching the plausibility of our
			project and what approach we should take to make it work as smoothly as possible. 
			Much of my contribution for the first week was organizational and research, organizing our Discord server that serves as the main point of communication to be more 
			easily accessible and navigable. For research, I spent time (re-)learning about Fourier Transforms, which will be our main process that allows us to synchronize lights to music,
			as well as looking into the different parts of our design and how we should approach integrating them step by step. 
			As a team we began to paint a clearer picture of our project and aligned on a lot of design ideas, as well as splitting up our goals each day.  
			During the second week, we took a much more hands-on approach: we were able to setup the environment to write code to our microcontroller. We set up some very basic code to read 
			an analog input to the circuit, which we then sent an wave generator output from an AD2 into the microcontroller. We built an amplifier circuit that would allow us to get 
			visible values from an electret microphone, which we also were able to wire into the ADC pin of our microcontroller and read values the same way we read the AD2 wave gen. 
			<div id="microphone circuit"> 
				<img src="Team/progress/progress2pics/mic_circuit.jpg" width="500" height="500"></img>
			</div>
		</br>
        </div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>
</body>
</html>
